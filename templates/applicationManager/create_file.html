{% extends "applicationManager/applicationManager_app_template.html" %}
{% load static %}


{% block native_application_content %}
    {{ block.super }}
    {% include "applicationManager/waitingPage.html" %}

{#    <div class="container-fluid">#}
        <div class="row">

            <!-- Page Content -->
            <div class="container">

                <!-- Page Header -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">New File
                            <small>Secondary Text</small>
                        </h1>
                    </div>
                </div>
                <!-- /.row -->

                <!-- Projects Row -->
                <div class="row">
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                </div>
                <!-- /.row -->

                <!-- Projects Row -->
                <div class="row">
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                </div>

                <!-- Projects Row -->
                <div class="row">
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                    <div class="col-md-4 portfolio-item">
                        <a href="#">
                            <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                        </a>
                        <h3>
                            <a href="#">Project Name</a>
                        </h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida
                            pellentesque urna varius vitae.</p>
                    </div>
                </div>
                <!-- /.row -->

                <hr>

                <!-- Pagination -->
                <div class="row text-center">
                    <div class="col-lg-12">
                        <ul class="pagination">
                            <li>
                                <a href="#">&laquo;</a>
                            </li>
                            <li class="active">
                                <a href="#">1</a>
                            </li>
                            <li>
                                <a href="#">2</a>
                            </li>
                            <li>
                                <a href="#">3</a>
                            </li>
                            <li>
                                <a href="#">4</a>
                            </li>
                            <li>
                                <a href="#">5</a>
                            </li>
                            <li>
                                <a href="#">&raquo;</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- /.row -->

                <hr>

                <!-- Footer -->
                <footer>
                    <div class="row">
                        <div class="col-lg-12">
                            <p>Copyright &copy; Your Website 2014</p>
                        </div>
                    </div>
                    <!-- /.row -->
                </footer>

            </div>
            <!-- /.container -->

        </div>
{#    </div>#}


    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>



{% endblock %}



{#User native application  body jscript in view if it is related to requested page otherwise in #}
{#use it in templates#}
{% block native_application_common_body_jscript %}
    {{ block.super }}
    {#    TODO: Move to Project level templates#}
    <!-- Custom Theme JavaScript -->
    <script src="{% static "projectCore/jscript/notify.js" %}"></script>
    <script src="{% static "applicationManager/jscript/deleteApplication.js" %}"></script>


    {% if messageType == "Exception" %}
        <script>
            $(document).ready(function () {
                $.notify("{{ message }}", "error");
            });

        </script>
    {% endif %}



    <script>


        var $table = $('#table');
        var $button = $('#button');
        var csrftoken = getCookie('csrftoken');


        $(function () {

            $('#list_selected').click(function () {
                alert('getSelections: ' + JSON.stringify($table.bootstrapTable('getAllSelections')));
            });

            {#             $('#delete_selected').click(function () {#}
            {#                alert('getSelections: ' + JSON.stringify($table.bootstrapTable('getAllSelections')));#}
            {#            });#}




            {#            -------------------#}
            $('#dump_data').click(function () {

                var apps2dump = {};
                var res = $table.bootstrapTable('getAllSelections');

                for (i = 0; i < res.length; i++) {
                    var jsobj = JSON.stringify(res[i]);
                    apps2dump[i] = res[i]['4'];
                }
                data = apps2dump;

                {# POST Data to service#}
                // Lets first setup the ajax request
                $.ajaxSetup({
                    beforeSend: function (xhr, settings) {
                        if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
                            // Send the token to same-origin, relative URLs only.
                            // Send the token only if the method warrants CSRF protection
                            // Using the CSRFToken value acquired earlier
                            xhr.setRequestHeader("X-CSRFToken", csrftoken);
                            //alert("beforeSend");
                        }
                    }
                });

                var postURL = "/applicationManager/dumpApplicationData/";
                //alert(postURL);
                $.ajax({
                    //beforeSend: function (xhr, opts) {
                    //    $("#dialog-confirm").dialog({
                    //        resizable: false,
                    //        height: 140,
                    //        modal: true,
                    //        buttons: {
                    //            "Delete all items": function () {
                    //                $(this).dialog("close");
                    //            },
                    //            Cancel: function () {
                    //                $(this).dialog("close");
                    //                xhr.abort();
                    //            }
                    //        }
                    //    });
                    //},

                    //beforeSend:function(){
                    //
                    //},

                    type: "POST",
//            type: $("form[data-formId=" + formId + "]").attr('method'),
                    url: postURL,
//          data:{ worker:user, task:bid, workStartTime:start, workStopTime:end }
                    data: data,
//            data:{}

                    error: function () {
                        //ShowStatus("AJAX - error()");

                        // Load the content in to the page.
                        //jContent.html("<p>Page Not Found!!</p>");
                    },


                    complete: function () {
                        //ShowStatus("AJAX - complete()");
                        //alert('complete')
                    },

                    success: function () {
                        //alert('sucess')
                    }
                }).done(function (msg) {
                    //location.reload(true)
                    {#                        $("#id_table_row_" + buttonId).remove();#}
                    alert(" Your data has been dumped. ");
                });


            });

            {#            --------------------#}
        });
    </script>

{% endblock %}